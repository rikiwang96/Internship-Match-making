<!--
This is the host's part.

This page is a form that shows the basics of the host using the quick form in WTForms.

This page contains the implementation of dynamic cascade selection in JavaScript label.(Nation, State, City)
-->
{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}

    <body>
    <h1>Host Information</h1>
    <div class="row">
        <div class="col-md-8">
            {{ wtf.quick_form(form) }}
            <!--The implementation of dynamic cascade selection-->
            <script>
                let nation_select = document.getElementById('nation')
                let state_select = document.getElementById('state')
                let city_select = document.getElementById('city')
                nation_select.onchange = function () {
                    nation = nation_select.value;
                    fetch('/nation_state/' + nation).then(function (response) {
                        response.json().then(function (data) {
                            let optionHTML1 = ''
                            for (let state of data.states) {
                                optionHTML1 += '<option value="' + state.name + '">' + state.name + '</option>';
                            }
                            state_select.innerHTML = optionHTML1;
                        })
                    })
                };
                state_select.onchange = function () {
                    state = state_select.value;

                    fetch('/state_city/' + state).then(function (response) {

                        response.json().then(function (data) {
                            let optionHTML2 = ''
                            for (let city of data.cities) {
                                optionHTML2 += '<option value="' + city.name + '">' + city.name + '</option>';
                            }
                            city_select.innerHTML = optionHTML2;
                        })
                    })
                };
            </script>

        </div>
    </div>
    </body>
{% endblock %}